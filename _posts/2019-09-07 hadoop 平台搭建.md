---
layout:     post
title:      Hadoop å¹³å°æ­å»ºåŠåŸºæœ¬ hdfs æ“ä½œ
subtitle:   å¤§æ•°æ®å¤„ç†
date:       2018-01-04
author:     Yi Xia
header-img: img/post-bg-BJJ.jpg
catalog: true
tags:
    - å¤§æ•°æ®å¤„ç†
---
- [Hadoop å¹³å°æ­å»ºåŠåŸºæœ¬æ“ä½œ](# Hadoop å¹³å°æ­å»ºåŠåŸºæœ¬æ“ä½œ)  
- [Hdfs åŸºæœ¬æ“ä½œ](## HdfsåŸºæœ¬æ“ä½œ)  
- [Eclipse è¿œç¨‹è°ƒè¯•Hadoop ç¨‹åº](## Eclipse è¿œç¨‹è°ƒè¯•Hadoop ç¨‹åº)  




# Hadoop å¹³å°æ­å»ºåŠåŸºæœ¬æ“ä½œ
> centos æ•°é‡ï¼š6
  windows æ•°é‡ï¼š1 (ç”¨ finalshell è¿æ¥ 6 å° centosï¼‰
  maobook æ•°é‡ï¼š1 ï¼ˆjava æ“ä½œ hdfsï¼‰

## Hadoop å¹³å°çš„æ­å»º
### åˆ†å¸ƒå¼æœºå™¨
![-w764](/img/blog_img/15678343280016.jpg)
### é›†ç¾¤æ­å»ºå½¢å¼
Hadoopç¯å¢ƒæ­å»ºåˆ†ä¸ºä¸‰ç§å½¢å¼ï¼šå•æœºæ¨¡å¼ã€ä¼ªåˆ†å¸ƒå¼æ¨¡å¼ã€å®Œå…¨åˆ†å¸ƒæ¨¡å¼

å•æœºæ¨¡å¼â€”â€” åœ¨ä¸€å°å•æœºä¸Šè¿è¡Œï¼Œæ²¡æœ‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œè€Œæ˜¯ç›´æ¥è¯»å†™æœ¬åœ°æ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿã€‚

ä¼ªåˆ†å¸ƒå¼â€”â€” ä¹Ÿæ˜¯åœ¨ä¸€å°å•æœºä¸Šè¿è¡Œï¼Œä½†ä¸åŒçš„æ˜¯Javaè¿›ç¨‹æ¨¡ä»¿åˆ†å¸ƒå¼è¿è¡Œä¸­çš„å„ç±»èŠ‚ç‚¹ã€‚å³ä¸€å°æœºå™¨ä¸Šï¼Œæ—¢å½“NameNodeï¼Œåˆå½“DataNodeï¼Œæˆ–è€…è¯´æ—¢æ˜¯JobTrackeråˆæ˜¯TaskTrackerã€‚æ²¡æœ‰æ‰€è°“çš„åœ¨å¤šå°æœºå™¨ä¸Šè¿›è¡ŒçœŸæ­£çš„åˆ†å¸ƒå¼è®¡ç®—ï¼Œæ•…ç§°ä¸ºâ€œä¼ªåˆ†å¸ƒå¼â€ã€‚

å®Œå…¨åˆ†å¸ƒå¼â€”â€” çœŸæ­£çš„åˆ†å¸ƒå¼ï¼Œç”±3ä¸ªåŠä»¥ä¸Šçš„å®ä½“æœºæˆ–è€…è™šæ‹Ÿæœºç»„æˆçš„æœºç¾¤ã€‚ä¸€ä¸ªHadoopé›†ç¾¤ç¯å¢ƒä¸­ï¼ŒNameNodeï¼ŒSecondaryNameå’ŒDataNodeæ˜¯éœ€è¦åˆ†é…åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä¹Ÿå°±éœ€è¦ä¸‰å°æœåŠ¡å™¨ã€‚

**å‰ä¸¤ç§æ¨¡å¼ä¸€èˆ¬ç”¨åœ¨å¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒä¸‹ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹éƒ½æ˜¯æ­å»ºå®Œå…¨åˆ†å¸ƒå¼æ¨¡å¼ã€‚**

ä»åˆ†å¸ƒå¼å­˜å‚¨çš„è§’åº¦æ¥è¯´ï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ç”±ä¸€ä¸ªNameNodeå’Œè‹¥å¹²ä¸ªDataNodeç»„æˆï¼Œå¦æœ‰ä¸€ä¸ªSecondaryNameNodeä½œä¸ºNameNodeçš„å¤‡ä»½ã€‚

ä»åˆ†å¸ƒå¼åº”ç”¨çš„è§’åº¦æ¥è¯´ï¼Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹ç”±ä¸€ä¸ªJobTrackerå’Œè‹¥å¹²ä¸ªTaskTrackerç»„æˆã€‚JobTrackerè´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦ï¼ŒTaskTrackerè´Ÿè´£å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚TaskTrackerå¿…é¡»è¿è¡Œåœ¨DataNodeä¸Šï¼Œè¿™æ ·ä¾¿äºæ•°æ®çš„æœ¬åœ°è®¡ç®—ã€‚JobTrackerå’ŒNameNodeåˆ™æ— é¡»åœ¨åŒä¸€å°æœºå™¨ä¸Šã€‚
### æ­å»ºæ­¥éª¤
ç½‘ä¸Šè¿™ç§æ•™ç¨‹è¶…çº§å¤šï¼Œæ­¤å¤„æ”¾ä¸€ä¸ª[è¯¦ç»†çš„è¿æ¥åœ°å€](https://blog.csdn.net/sjmz30071360/article/details/79889055)
ç®€è¿°ä¸€ä¸‹æ­å»ºçš„æµç¨‹ï¼š
* æ¯å°æœºå™¨å®‰è£…&é…ç½®JDKï¼ˆ1å°åšå¥½åï¼Œå…‹éš†å‡ºå…¶å®ƒæœºå™¨ï¼‰
* ä¸Šä¼ &é…ç½®hadoopï¼ˆé…ç½®å®Œmasteråï¼Œå°†/usr/hadoop/æ•´ä¸ªç›®å½•å†…å®¹copyåˆ°å…¶å®ƒæœºå™¨ï¼‰
* ä¿®æ”¹æ¯å°æœºå™¨ä¸»æœºå(hostname) ï¼Œä¾¿äºåé¢ hadoop ç¯å¢ƒæ­å»º
* é…ç½®sshï¼Œå®ç°æ— å¯†ç ç™»å½•
* ä¿®æ”¹ hadoop ä¸­çš„ hdfs-site.xmlå’Œ core-site.xmlæ–‡ä»¶
* å¯åŠ¨ hadoop

### é‚£äº›å¹´ï¼Œé‚£äº› hadoopï¼Œé‚£äº›å‘
- åˆ«é—®æˆ‘ä¸ºä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦å»æ‰ï¼Œä½†ä¸å»æ‰å°±æ˜¯é”™ğŸ˜¢
![-w227](/img/blog_img/15682001213320.jpg)
- java çš„ç¯å¢ƒï¼Œä¸è¦ç”¨ centos åŸæ¥çš„java SEï¼Œè‡ªå·±ä¸‹ä¸€ä¸ª java1.8ï¼Œå† scp åˆ°æ¯ä¸€ä¸ªæœºå™¨ä¸­ã€‚é…ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼Œsource ä¸€ä¸‹
  æœ‰æ—¶å€™æ¯ä¸€æ¬¡éƒ½å°½å¯èƒ½çš„ source ä¸€ä¸‹ï¼Œç»å¸¸åˆæ¢å¤ä»¥å‰çš„æƒ…å†µäº†
  
- ä¸è¦å¤šæ¬¡ hadoop namenode -format ,é€ æˆ DataNode å’ŒNameNode çš„ version ä¸ä¸€æ ·ï¼Œé€ æˆä¸¤è€…è¿æ¥å¤±è´¥
- åœ¨ä¸¤è€…ä¹‹é—´åˆ‡æ¢æ—¶ï¼Œè‹¥é‡åˆ°æ— æ³•æ­£å¸¸å¯åŠ¨çš„æƒ…å†µï¼Œå¯ä»¥åˆ é™¤æ‰€æ¶‰åŠèŠ‚ç‚¹çš„ä¸´ æ—¶æ–‡ä»¶å¤¹ï¼Œè¿™æ ·è™½ç„¶ä¹‹å‰çš„æ•°æ®ä¼šè¢«åˆ æ‰ï¼Œä½†èƒ½ä¿è¯é›†ç¾¤æ­£ç¡®å¯åŠ¨ã€‚æ‰€ä»¥å¦‚æœ é›†ç¾¤ä»¥å‰èƒ½å¯åŠ¨ï¼Œä½†åæ¥å¯åŠ¨ä¸äº†ï¼Œç‰¹åˆ«æ˜¯ DataNode æ— æ³•å¯åŠ¨ï¼Œä¸å¦¨è¯•ç€åˆ  é™¤æ‰€æœ‰èŠ‚ç‚¹(åŒ…æ‹¬ Slave èŠ‚ç‚¹)ä¸Šçš„ /usr/local/hadoop/tmp æ–‡ä»¶å¤¹ï¼Œå†é‡æ–° æ‰§è¡Œä¸€æ¬¡   ï¼Œå†æ¬¡å¯åŠ¨è¯•è¯•ã€‚

### hadoopæ­å»ºç»“æœ
namenodeï¼ˆ10.113.10.11ï¼‰ï¼š
![-w766](/img/blog_img/15678353254973.jpg)
DataNodeï¼ˆå…¶ä»– 5 å°ï¼‰
![-w763](/img/blog_img/15678353578430.jpg)



## HdfsåŸºæœ¬æ“ä½œ
### æ¦‚è¿°
HDFS Shellå‘½ä»¤å…è®¸ä½¿ç”¨å‘½ä»¤è¡Œåœ¨HDFSå­˜å‚¨ä¸­è¿›è¡Œæ–‡ä»¶å¤¹å’Œæ–‡ä»¶æ“ä½œã€‚
å¦‚æ–‡ä»¶å¤¹çš„å¢åˆ æ”¹æŸ¥ã€æ–‡ä»¶çš„å¢åˆ æ”¹æŸ¥ç­‰ã€‚
### å‘½ä»¤æ ¼å¼
hdfs dfs -æ“ä½œå‘½ä»¤ å‚æ•°
å‰é¢çš„ã€hdfs dfs -ã€‘éƒ¨åˆ†æ˜¯å›ºå®šçš„ï¼Œåé¢çš„ã€æ“ä½œå‘½ä»¤ å‚æ•°ã€‘éƒ¨åˆ†æ˜¯å˜åŒ–çš„
### ä¸‹é¢ç»“åˆä¸€äº›è€å¸ˆç»™çš„æ–‡æ¡£ä»¥åŠç½‘ä¸Šçš„èµ„æ–™ï¼Œå®è·µäº†ä¸€ä¸‹å¸¸è§çš„å‘½ä»¤
hdfs dfs -mkdir /abc #åˆ›å»ºåä¸º/abcçš„æ–‡ä»¶å¤¹
![-w763](/img/blog_img/15678563032275.jpg)

hdfs dfs -ls / 0 #åˆ—å‡ºæ ¹ç›®å½•ä¸­çš„å†…å®¹

hdfs dfs -ls -R / #é€’å½’åˆ—å‡ºå¤šå±‚æ–‡ä»¶å¤¹çš„å†…å®¹

hdfs dfs -put /etc/hosts /abc/hosts #æŠŠLinuxç³»ç»Ÿä¸­/etc/hostsæ–‡ä»¶ä¸Šä¼ åˆ°HDFSä¸­

hdfs dfs -appendToFile /etc/hosts /abc/hosts

**å‘æ–‡ä»¶ä¸­è¿½åŠ å†…å®¹**

hdfs dfs -checksum /abc/hosts #æŸ¥çœ‹æ–‡ä»¶çš„MD5å€¼

hdfs dfs -du -h / #æŸ¥çœ‹æ–‡ä»¶/æ–‡ä»¶å¤¹çš„å¤§å°

**-hä»¥äººç±»å‹å¥½çš„æ–¹å¼æ˜¾ç¤ºå¤§å°ï¼ˆè¿‡å¤§æ—¶å¸¦å•ä½ï¼‰**

hdfs dfs -get /abc/hosts ./hosts #æŠŠHDFSä¸­çš„æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°Linuxä¸­

**æ³¨æ„./hostsæ˜¯ä¸‹è½½åä¿å­˜åˆ°æœ¬åœ°çš„ä½ç½®**

hdfs dfs -cat /abc/hosts #æŸ¥çœ‹HDFSä¸­æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹

**æ³¨æ„ï¼šåªèƒ½æŸ¥çœ‹æ–‡ä»¶æ–‡ä»¶**

hdfs dfs -tail /abc/hosts #åˆ—å‡ºæ–‡ä»¶ç»“å°¾å¤„1KBçš„æ–‡ä»¶å†…å®¹

hdfs dfsÂ -mv /abc/hosts /abc/xyz #ä¿®æ”¹æ–‡ä»¶åå­—æˆ–ç§»åŠ¨ä½ç½®

hdfs dfs -cp /abc/xyz /abc/hosts #å¤åˆ¶æ–‡ä»¶

hdfs dfs -find / -name xyz #æŸ¥æ‰¾åå­—ä¸ºxyzçš„æ–‡ä»¶çš„ä½ç½®

hdfs dfs -rmdir /abc #åˆ é™¤åä¸º/abcçš„æ–‡ä»¶å¤¹

**æ³¨æ„ï¼šå¦‚æœå…¶ä¸­è¿˜æœ‰æ–‡ä»¶åˆ™ä¸èƒ½åˆ é™¤**

hdfs dfsÂ -rm /abc/hosts #åˆ é™¤æ–‡ä»¶

hdfs dfs -rm -r /abc #é€’å½’åˆ é™¤æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸­æœ‰æ–‡ä»¶ä¹Ÿèƒ½åˆ é™¤

hdfs dfs -df #æŸ¥çœ‹HDFSæ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ
## Eclipse è¿œç¨‹è°ƒè¯•Hadoop ç¨‹åº
ç½‘ä¸Šè¿™ç§æ•™ç¨‹è¶…çº§å¤šï¼Œæ­¤å¤„æ”¾ä¸€ä¸ª[è¯¦ç»†çš„è¿æ¥åœ°å€](https://www.cnblogs.com/999-/p/6840682.html)

1. ä¸‹è½½å¹¶å®‰è£…eclipse
2. https://github.com/winghc/hadoop2x-eclipse-plugin
3. ä¸‹è½½æ’ä»¶åˆ°eclipseçš„æ’ä»¶ç›®å½• 
4. é…ç½®hadoop å®‰è£…çš„ç›®å½•
![-w896](/img/blog_img/15678360729249.jpg)
1. é…ç½®é…ç½®æ–‡ä»¶
![-w912](/img/blog_img/15678361163717.jpg)
1. å¯åŠ¨ hadoop
2. æ–°å»ºMapReduceä»»åŠ¡
 File->New->project->Map/Reduce Project->Next
 ![-w687](/img/blog_img/15678361848977.jpg)
8. é¡¹ç›®æ­å»ºå®Œæ¯•
![-w1440](/img/blog_img/15678362121958.jpg)
